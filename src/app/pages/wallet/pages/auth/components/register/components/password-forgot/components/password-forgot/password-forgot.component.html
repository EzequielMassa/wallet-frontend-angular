<section class="password__forgot">
  <ng-container
    *ngIf="!(isSubmitedSuccessfully$ | async); else successTemplate"
  >
    <mat-card class="example-card" [@expandOnEnter] [@collapseOnLeave]>
      <mat-card-header>
        <mat-card-title>Recuperar contraseña</mat-card-title>
        <mat-card-subtitle
          >Ingrese el correo electrónico que utilizo para registrarse y le
          enviaremos un email con las instrucciones para acceder su cuenta
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <form
          class="password__forgot__form"
          [formGroup]="passwordForgotForm"
          (ngSubmit)="onSubmit()"
        >
          <mat-form-field appearance="outline" class="password__forgot__input">
            <mat-label>Ingrese su e-mail</mat-label>
            <input
              matInput
              type="email"
              id="passwordForgotEmailInput"
              formControlName="mailTo"
              placeholder="ejemplo@email.com"
              [class.invalid]="
                passwordForgotForm.get('mailTo')?.invalid &&
                (passwordForgotForm.get('mailTo')?.touched ||
                  passwordForgotForm.get('mailTo')?.dirty)
              "
            />
            <mat-error
              *ngIf="
                passwordForgotForm.get('mailTo')?.hasError('required') &&
                (passwordForgotForm.get('mailTo')?.dirty ||
                  passwordForgotForm.get('mailTo')?.touched)
              "
              >Debe ingresar el correo al cual le enviaremos las instrucciones
            </mat-error>
            <mat-error
              *ngIf="
                passwordForgotForm.get('mailTo')?.hasError('email') &&
                (passwordForgotForm.get('mailTo')?.dirty ||
                  passwordForgotForm.get('mailTo')?.touched)
              "
            >
              El formato del e-mail es incorrecto
            </mat-error>
          </mat-form-field>
          <wal-backend-error-messages
            *ngIf="backendErrors$ | async"
            [backendErrors]="backendErrors$ | async"
          >
          </wal-backend-error-messages>
          <mat-card-actions align="start">
            <button mat-button color="primary" type="submit">Enviar</button>
            <button mat-button color="warn" (click)="cancel()">Cancelar</button>
          </mat-card-actions>
        </form>
        <ng-container *ngIf="isSubmitting$ | async">
          <section class="example-section">
            <mat-progress-bar [color]="color" [mode]="mode"> </mat-progress-bar>
          </section>
        </ng-container>
      </mat-card-content>
    </mat-card>
  </ng-container>
  <ng-template #successTemplate>
    <wal-password-forgot-success
      [@expandOnEnter]
      [@collapseOnLeave]
    ></wal-password-forgot-success>
  </ng-template>
</section>
